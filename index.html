<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Marathon</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cross-platform test runner written for Android and iOS projects">
    <meta name="keywords" content="android, testing, testing-tool, test-runner, espresso, uitest, uitesting, uitests, ios, marathon, xcrun, instrumentation, instrumentation-tests, gradle, parallel, performance">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet"
          type="text/css">
    <!-- Animated -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="shortcut icon" href="/marathon/img/favicon.png">
    <!-- highlight  css -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/solarized-dark.min.css">
    <!-- main css -->
    <link rel="stylesheet" type="text/css" href="/marathon/css/marathon.css">
    <!-- tabs -->
    <link rel="stylesheet" type="text/css" href="/marathon/css/tabs.css">

    <!-- Diagrams support -->
    <script src="/marathon/js/dagre.min.js"></script>
    <script src="/marathon/js/lodash.min.js"></script>
    <script src="/marathon/js/nomnoml.js"></script>
    <script src="/marathon/js/diagrams.js"></script>

    
    <script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', '', 'auto');
    ga('send', 'pageview');


</script>

    
</head>

<body id="doc-body">
<div id="wrapper">
    <div id="sidebar-wrapper">
    <div>
      <a class="brand" href="/marathon/">
            <img src="/marathon/img/marathon-brand-sidebar.svg" alt="">
      </a>
      <a href="javascript:void(0)" id="main-toggle" class="sidebar-toggle">
            <i class="fa fa-bars"></i>
      </a>
    </div>
    <ul class="sidebar-nav">
    
        
        
        <li class="sidebar-nav-item">
          <a href="#">
            <span>General</span>
            <i class="fa fa-angle-down"></i>
          </a>
          <ul>
            
            
            <li data-order="1">
              <a href="/marathon/doc/getting-started.html">
                  <i class="fa fa-circle"></i>
                  <span>Getting Started</span>
              </a>
            </li>
            
            <li data-order="2">
              <a href="/marathon/doc/downloading.html">
                  <i class="fa fa-circle"></i>
                  <span>Downloading</span>
              </a>
            </li>
            
            <li data-order="3">
              <a href="/marathon/doc/configuration.html">
                  <i class="fa fa-circle"></i>
                  <span>Options</span>
              </a>
            </li>
            
            <li data-order="5">
              <a href="/marathon/doc/executing.html">
                  <i class="fa fa-circle"></i>
                  <span>Executing</span>
              </a>
            </li>
            
            <li data-order="6">
              <a href="/marathon/doc/reports.html">
                  <i class="fa fa-circle"></i>
                  <span>Reporting</span>
              </a>
            </li>
            
            <li data-order="7">
              <a href="/marathon/doc/faq.html">
                  <i class="fa fa-circle"></i>
                  <span>FAQ</span>
              </a>
            </li>
            
            <li data-order="8">
              <a href="/marathon/doc/special-thanks.html">
                  <i class="fa fa-circle"></i>
                  <span>Special thanks</span>
              </a>
            </li>
            
          </ul>
        </li>
    
        
        
        <li class="sidebar-nav-item">
          <a href="#">
            <span>Reference</span>
            <i class="fa fa-angle-down"></i>
          </a>
          <ul>
            
            
            <li data-order="">
              <a href="/marathon/ref/samples.html">
                  <i class="fa fa-circle"></i>
                  <span>Samples</span>
              </a>
            </li>
            
          </ul>
        </li>
    
        
        
        <li class="sidebar-nav-item">
          <a href="#">
            <span>Vendor extensions</span>
            <i class="fa fa-angle-down"></i>
          </a>
          <ul>
            
            
            <li data-order="1">
              <a href="/marathon/ven/android.html">
                  <i class="fa fa-circle"></i>
                  <span>Android</span>
              </a>
            </li>
            
            <li data-order="2">
              <a href="/marathon/ven/ios.html">
                  <i class="fa fa-circle"></i>
                  <span>iOS</span>
              </a>
            </li>
            
          </ul>
        </li>
    
        
        
        <li class="sidebar-nav-item">
          <a href="#">
            <span>Developers</span>
            <i class="fa fa-angle-down"></i>
          </a>
          <ul>
            
            
            <li data-order="2">
              <a href="/marathon/dev/contributing.html">
                  <i class="fa fa-circle"></i>
                  <span>Contributing</span>
              </a>
            </li>
            
            <li data-order="3">
              <a href="/marathon/dev/vision.html">
                  <i class="fa fa-circle"></i>
                  <span>Vision</span>
              </a>
            </li>
            
          </ul>
        </li>
    
    </ul>

</div>

    <div id="doc-wrapper">
    <div class="doc-header">
        <a href="javascript:void(0)" id="main-toggle" class="sidebar-toggle">
            <i class="fa fa-bars"></i>
        </a>
        <div class="search-wrapper">
            <input class="search" id="docsearch" placeholder="Search documentation..." type="search">
        </div>
    </div>
    <div class="doc-content">
        
        <h1 id="about-marathon">About Marathon</h1>

<p>Marathon is a fast and platform-independent test runner focused on performance and stability. Marathon offers easy to use platform implementations for Android and iOS as well as an API for use with custom hardware farms.</p>

<p>Marathon implements multiple key concepts related to test execution such as test batching, device pools, test sharding, test sorting, preventive retries as well as post-factum retries. By default, most of these are set to conservative defaults but custom configurations are encouraged for those who want to optimize performance and/or stability.</p>

<p>Marathon’s primary focus is on full control over the balance between stability of test execution and the overall test run performance.</p>

<h1 id="performance">Performance</h1>
<p>Marathon takes into account two key aspects of test execution:</p>
<ul>
  <li>The duration of the test</li>
  <li>The probability of the test passing
In order for the test run to finish as quickly as possible one must balance the execution of tests with regards to the expected duration of the test. On the other hand we need to address the flakiness of the environment and the test itself. One key indicator of flakiness is the probability of the test passing.</li>
</ul>

<p>Marathon takes a number of steps to ensure that each test run is as balanced as possible:</p>
<ul>
  <li>The flakiness strategy queues up preventive retries for tests which are expected to fail during the test run according to the current real-time statistics</li>
  <li>The sorting strategy forces long tests to be executed first so that if an unexpected retry attempt occurs it doesn’t affect the test run significantly (e.g. at the end of execution)</li>
  <li>If all else fail we revert back to post-factum retries but we try to limit it’s impact on the run with retry quotas</li>
</ul>

<h1 id="tldr">TL;DR</h1>

<h2 id="installation">Installation</h2>

<h3 id="via-brew">Via brew</h3>
<pre><code class="language-bash">$ brew tap malinskiy/tap
$ brew install malinskiy/tap/marathon
</code></pre>

<h3 id="or-manually-download-the-binary">Or manually download the binary</h3>
<pre><code class="language-bash">curl https://github.com/Malinskiy/marathon/releases/download/X.X.X/marathon-X.X.X.zip -o marathon-X.X.X.zip
unzip -d $DESTINATION marathon-X.X.X.zip
export PATH=$PATH:$DESTINATION/marathon-X.X.X/bin
</code></pre>

<h2 id="configuration">Configuration</h2>

<p>Create a basic <strong>Marathonfile</strong> in the root of your project with the following content (example for Android)</p>
<pre><code class="language-yaml">name: "My application"
outputDir: "build/reports/marathon"
vendorConfiguration:
  type: "Android"
  applicationApk: "app/build/outputs/apk/debug/app-debug.apk"
  testApplicationApk: "app/build/outputs/apk/androidTest/debug/app-debug-androidTest.apk"
</code></pre>

<p>Vendor section describes platform specific details, for iOS a simple configuration would look like:</p>

<pre><code class="language-yaml">name: "My application"
outputDir: "derived-data/Marathon"
testClassRegexes: ["^((?!Abstract).)*Tests$"]
vendorConfiguration:
  type: "iOS"
  derivedDataDir: "derived-data"
  sourceRoot: "sample-appUITests"
  knownHostsPath: ${HOME}/.ssh/known_hosts
  remoteUsername: ${USER}
  remotePrivateKey: ${HOME}/.ssh/marathon
</code></pre>

<p>Since iOS doesn’t have any way to discover remote execution devices you have to provide your remote simulators using the <strong>Marathondevices</strong> file:</p>

<pre><code class="language-yaml">- host: "10.0.0.2"
  udid: "72F9E06F-FBFD-4639-8157-577A0B2E9FDF"
</code></pre>

<p>This <strong>Marathondevices</strong> file specifies a list of macOS instances and the UDIDs of simulators for use. All the hosts are accessed via ssh and 
require a non-interactive authentication. Even if you login to localhost you still require a private key that will pass the authentication. 
Please make sure before executing the test run that you can ssh into all the <code>host</code>s listed in the <strong>Marathondevices</strong>:</p>
<pre><code class="language-bash">$ ssh 10.0.0.2
</code></pre>

<h2 id="execution">Execution</h2>

<p>Start the test runner in the root of your project</p>
<pre><code class="language-bash">$ marathon 
XXX [main] INFO com.malinskiy.marathon.cli.ApplicationView - Starting marathon
XXX [main] INFO com.malinskiy.marathon.cli.config.ConfigFactory - Checking Marathonfile config
...
</code></pre>

<h1 id="getting-started">Getting Started</h1>
<p>Start by visiting the <a href="/marathon/doc/downloading.html">Download and Setup</a> page to learn how to integrate Marathon into your project.</p>

<p>Then take a look at <a href="/marathon/doc/configuration.html">Configuration</a> page to learn the basics of configuration.</p>

<p>For more help and examples continue through the rest of the Documentation section, or take a look at one of our <a href="/marathon/ref/samples.html">sample apps</a>.</p>

<h1 id="requirements">Requirements</h1>
<p>Marathon requires Java Runtime Environment 8 or higher.</p>


    </div>
</div>

</div>
<!-- Jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js"></script>
<script> hljs.initHighlighting(); </script>
<!-- Docsearch -->
<script src="/marathon/js/docsearch.min.js" type="text/javascript"></script>
<!-- Touch gesture support -->
<script src="/marathon/js/hammer.min.js"></script>
<!-- Custom scripts for this template -->
<script src="/marathon/js/functions.js"></script>
<script src="/marathon/js/tabs.js"></script>

</body>
</html>
